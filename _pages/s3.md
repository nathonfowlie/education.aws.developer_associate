---
title: "S3"
header:
  image: "/assets/images/aws_developer_associate_teaser.jpg"
permalink: /s3/
sidebar:
  nav: "docs"
toc: true
toc_icon: "book-reader"
toc_label: "Table of Contents"
---

## Overview

- Global service.
- Consists of buckets and objects.

## Buckets

- Allows files (objects) to be storeid.
- Have a globally unique name.
- Each bucket sits in a region, even though S3 is a global service.
- Public access is blocked by default.

### Naming Convention

Bucket names must follow a naming convention -

- No uppercase
- No underscore
- 3-63 chars
- Not an IP
- Must start with a lowercase letter or number.

## S3 Objects

- Have a key (full path to the file, excluding the bucket name ie: my_file.txt, /path/to/my_file.txt).
- Prefix is the file path (/path/to/file).
- Object name is the file name (my_file.txt).
- Object value is the file contents.
- Max object size is 5TB.
- Max upload size at any time is 5GB. Larger than that must use multi-part uploads.
- Have key-value pair metadata.
- Can be tagged.
- Have a version id if versioning is enabled.
- Each object can have ACLs, be encrypted, assigned a storage class etc.
- Can have a pre-signed URL.

### Versioning

- Enabled at the bucket level.
- Each time the same key is over-written, it will be given a new version.
- Files not versioned prior to enabling versioning will have the version "null".
- Suspending versioning does not delete the previous versions.
- Delete marker is created when a file is deleted. Old versions of the file will remain accessible.
- Deleting the delete marker, will result in the latest version of the file being restored.

### Encryption

- 4 methods to encrypt objects
    | Method                 | Description                                                                  |
    |------------------------|------------------------------------------------------------------------------|
    | SS3-S3                 | Use keys handled and managed by AWS.                                         |
    | SSE-KMS                | Use AWS KMS to manage encryption keys.                                       |
    | SSE-C                  | Manage your own encryption keys.                                             |
    | Client Side Encryption | Customer fully managed the encryption/decryption process on the client side. |

#### SSE-S3

- Encryption keys managed by AWS S3.
- Server-side encryption.
- Uses AES-256.
- Must add the header **"x-amz-server-side-encryption": "AES256"**.

#### SSE-KMS

- Use AWS KMS to manage encryption keys.
- Provides control over who has access to the keys, plus an audit trail.
- Server-side encryption.
- Uses the Customer Master Key (CMK) to encrypt the object.
- Must add the header **"x-amz-server-side-encryption": "aws:kms"**.

#### SSE-C

- Uses Client side data key provided by the user (outside of AWS).
- Server-side encryption.
- Key is not stored by S3.
- Must use HTTPS.
- Encryption key needs to be in the HTTP header.

#### Client Side Encryption

- Customer fully controls the encryption/decryption cycle.
- Object encrypted prior to upload.
- S3 Encryption Client library can help do this.
- Clients must encrypt/decrypt the object themselves.

### Encryption in Transit (TLS/SS)

- S3 endpoints can be utilized using HTTP, or HTTPS.

